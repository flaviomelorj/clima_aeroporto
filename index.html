<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    
    
    <style type="text/css">
      #head{
        background-color: #DCDCDC; 
      }

      textarea:focus, input:focus {
         box-shadow: 0 0 0 0;
         outline: 0;
      }
    </style>

    <title>TEMPO REAL</title>
  </head>
  <body>
    
    <div class="container-fluid">
      <div class="row" id="head">
        <div class="col-12">
          <h1 class="display-3 text-center"><img src="img/av.png"> condições dos aeroportos <img src="img/av.png"> </h1>
        </div>
      </div>

      <div class="row mt-3">
        <div class="col-sm-6">

          <div class="card" style="width: 40rem;">
          <img src="img/macapa.jpg" width="350" height="220" class="card-img-top" alt="...">
          <div class="card-body">
          <h5 class="card-title">Macapá</h5>
          <p class="card-text">Verificar as condições do aeroporto de Macapá</p>
          
          <a onclick="tempoAeroporto('SBMQ')" href="#inf" class="btn btn-secondary">Verificar</a>
          </div>
          </div>

        </div>
      
        <div class="col-sm-6">
          
              <div class="card" style="width: 40rem;">
          <img src="img/natal.png" width="350" height="220"  class="card-img-top" alt="...">
          <div class="card-body">
          <h5 class="card-title">Natal</h5>
          <p class="card-text">Verificar as condições do aeroporto de Natal</p>
          <a onclick="tempoAeroporto('SBNT')" href="#inf" class="btn btn-secondary">Verificar</a>
          </div>
          </div>

        </div>
        <div class="col-sm-6 mt-3">
          
          <div class="card" style="width: 40rem;">
          <img src="img/rio.jpg" width="350" height="220"  class="card-img-top" alt="...">
          <div class="card-body">
          <h5 class="card-title">Rio de janeiro</h5>
          <p class="card-text">Verificar as condições do aeroporto de Rio de janeiro</p>
          <a onclick="tempoAeroporto('SBGL')" href="#inf" class="btn btn-secondary">Verificar</a>
          </div>
          </div>


        </div>
        <div class="col-sm-6 mt-3">
          
              <div class="card" style="width: 40rem;">
          <img src="img/sp.jpg" width="350" height="220" class="card-img-top" alt="...">
          <div class="card-body">
          <h5 class="card-title">São Paulo</h5>
          <p class="card-text">Verificar as condições do aeroporto de São Paulo</p>
          <a onclick="tempoAeroporto('SBGR')" href="#inf" class="btn btn-secondary">Verificar</a>
          </div>
          </div>


        </div>
        
        </div>

      <div class="row mt-3" id="inf">
        <div class="col-sm-12">
          <h3 class="display-4">Código:<input type="text" name="" id="cod" readonly>
          <h3 class="display-4">Ultima atualização:<input type=""  id="ultima" name="" readonly>
          <h3 class="display-4">Pressão:<input type="" id="pressao" name="" readonly="">
          <h3 class="display-4">Temperatura: <input type="" id="temperatura" name="" readonly>
          <h3 class="display-4">Tempo:<input type="" id="tempo" name="" readonly>
          <h3 class="display-4">Umidade:<input type="" id="umidade" name="" readonly><span class="d-inline">%</span>
          <h3 class="display-4">Velocidade do vento:<input type="" id="velocidade" name="" readonly>
          <h3 class="display-4">Visiblidade:<input type="" id="visibilidade" name="" readonly>

        </div>
      </div>
    </div><!--==========   FIM DO CONTAINER  ==============-->
    




    <script src="js/xmltojson.js" type="text/javascript"></script>

    <!--=============================  JAVASCRIPT  =============================-->
   <script>

   
    function tempoAeroporto(sigla) {
        




        let xml = new XMLHttpRequest();
        xml.open('GET', 'http://servicos.cptec.inpe.br/XML/estacao/' + sigla + '/condicoesAtuais.xml');
        console.log('chegamos aqui')
        xml.onreadystatechange = () => {
          if(xml.readyState == 4 && xml.status == 200) {
            
            let XML_cond = xml.responseText

            //-----------

            let parser_to_dom = new DOMParser();
            let xml_cond_string = parser_to_dom.parseFromString(XML_cond, 'text/xml');

            //-----------------

            json_cond = xmlToJson(xml_cond_string);



        //=================================================

    
 
       //=================================================
         
  
           let codigo1 = document.getElementById('cod');
           
            
            codigo1.className = 'd-inline';
            
            
            codigo1.value = json_cond['metar']['codigo']['#text'];
            
          
            

      //========================================================================

            let codigo2 = document.getElementById('ultima');
            
            codigo2.className = 'd-inline';
            
            codigo2.value = json_cond['metar']['atualizacao']['#text'];
            

     //========================================================================

            let codigo3 = document.getElementById('pressao');
            
            codigo3.className = 'd-inline';
            
            codigo3.value = json_cond['metar']['pressao']['#text'];
           


     //========================================================================

            let codigo4 = document.getElementById('temperatura');
            
            codigo4.className = 'd-inline';
            
            codigo4.value = json_cond['metar']['temperatura']['#text'];
            


     //========================================================================

            let codigo5 = document.getElementById('tempo');
           
            codigo5.className = 'd-inline';
            
            codigo5.value = json_cond['metar']['tempo_desc']['#text'];
            


     //========================================================================

            let codigo6 = document.getElementById('umidade');
            
            codigo6.className = 'd-inline';
            
            codigo6.value = json_cond['metar']['umidade']['#text'];
            

    //========================================================================

            let codigo7 = document.getElementById('velocidade');
            
            codigo7.className = 'd-inline';
            
            codigo7.value = json_cond['metar']['vento_int']['#text'];
            

     //========================================================================
            let codigo8 = document.getElementById('visibilidade');

           
            codigo8.className = 'd-inline';
            
            codigo8.value = json_cond['metar']['visibilidade']['#text'];
                 


            
          }

        }

        xml.send();

      }
        

         </script>
    <!--========================================================================-->
    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
    -->
  </body>
</html>